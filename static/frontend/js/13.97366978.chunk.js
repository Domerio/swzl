"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[13],{3013:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"dashboard-container"},[t.error?s("el-alert",{staticClass:"error-alert",attrs:{title:t.error,type:"error","show-icon":""}}):t._e(),t.loading||t.error?s("div",{staticClass:"loading-wrapper"},[s("el-icon",{staticClass:"loading-icon",attrs:{size:50}},[s("Loading")],1),s("p",[t._v("正在加载学生数据...")])],1):[s("el-card",{staticClass:"user-card",attrs:{shadow:"hover"},scopedSlots:t._u([{key:"header",fn:function(){return[s("span",{staticClass:"card-title"},[t._v("👤 我的信息")])]},proxy:!0}],null,!1,281674180)},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("姓名：")]),s("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.userInfo.name))])],1),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("学号：")]),s("el-tag",[t._v(t._s(t.userInfo.id))])],1)])]),s("el-row",{staticClass:"function-grid",attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"function-card",attrs:{shadow:"hover"}},[s("router-link",{attrs:{to:"/items/lost"}},[s("h3",[t._v("📝 失物登记")]),s("p",{staticClass:"desc"},[t._v("丢失物品登记入口")])])],1)],1),s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"function-card",attrs:{shadow:"hover"}},[s("router-link",{attrs:{to:"/items/found"}},[s("h3",[t._v("🔍 招领查询")]),s("p",{staticClass:"desc"},[t._v("查看最新招领信息")])])],1)],1)],1)]],2)},r=[],i={data:()=>({loading:!0,error:null,studentData:null}),computed:{userInfo(){return{name:this.$store.state.user.real_name||"未知用户",role:this.$store.state.user.role||"未定义角色",id:this.$store.state.user.id||"无ID"}}},async created(){await this.verifyAccess(),await this.loadStudentData()},methods:{async verifyAccess(){this.$store.state.user.isAuthenticated?"student"!==this.$store.state.user.role&&(this.$message.warning("非法访问学生页面"),this.$router.go(-1)):await this.$router.replace(`/login?redirect=${encodeURIComponent(this.$route.fullPath)}`)},async loadStudentData(){try{const t=await this.$axios.get(`/api/students/${this.userInfo.id}/`);this.studentData=t.data}catch(t){this.error=t.response?.data?.detail||"数据加载失败"}finally{this.loading=!1}}}},n=i,o=a(1656),l=(0,o.A)(n,e,r,!1,null,"88af5036",null),c=l.exports}}]);
//# sourceMappingURL=13.97366978.chunk.js.map