"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[13],{3013:function(t,s,a){a.r(s),a.d(s,{default:function(){return c}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"dashboard-container"},[t.error?s("el-alert",{staticClass:"error-alert",attrs:{title:t.error,type:"error","show-icon":""}}):t._e(),t.loading||t.error?s("div",{staticClass:"loading-wrapper"},[s("el-icon",{staticClass:"loading-icon",attrs:{size:50}},[s("Loading")],1),s("p",[t._v("æ­£åœ¨åŠ è½½å­¦ç”Ÿæ•°æ®...")])],1):[s("el-card",{staticClass:"user-card",attrs:{shadow:"hover"},scopedSlots:t._u([{key:"header",fn:function(){return[s("span",{staticClass:"card-title"},[t._v("ğŸ‘¤ æˆ‘çš„ä¿¡æ¯")])]},proxy:!0}],null,!1,281674180)},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("å§“åï¼š")]),s("el-tag",{attrs:{type:"success"}},[t._v(t._s(t.userInfo.name))])],1),s("div",{staticClass:"info-item"},[s("span",{staticClass:"label"},[t._v("å­¦å·ï¼š")]),s("el-tag",[t._v(t._s(t.userInfo.id))])],1)])]),s("el-row",{staticClass:"function-grid",attrs:{gutter:20}},[s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"function-card",attrs:{shadow:"hover"}},[s("router-link",{attrs:{to:"/items/lost"}},[s("h3",[t._v("ğŸ“ å¤±ç‰©ç™»è®°")]),s("p",{staticClass:"desc"},[t._v("ä¸¢å¤±ç‰©å“ç™»è®°å…¥å£")])])],1)],1),s("el-col",{attrs:{span:8}},[s("el-card",{staticClass:"function-card",attrs:{shadow:"hover"}},[s("router-link",{attrs:{to:"/items/found"}},[s("h3",[t._v("ğŸ” æ‹›é¢†æŸ¥è¯¢")]),s("p",{staticClass:"desc"},[t._v("æŸ¥çœ‹æœ€æ–°æ‹›é¢†ä¿¡æ¯")])])],1)],1)],1)]],2)},r=[],i={data:()=>({loading:!0,error:null,studentData:null}),computed:{userInfo(){return{name:this.$store.state.user.real_name||"æœªçŸ¥ç”¨æˆ·",role:this.$store.state.user.role||"æœªå®šä¹‰è§’è‰²",id:this.$store.state.user.id||"æ— ID"}}},async created(){await this.verifyAccess(),await this.loadStudentData()},methods:{async verifyAccess(){this.$store.state.user.isAuthenticated?"student"!==this.$store.state.user.role&&(this.$message.warning("éæ³•è®¿é—®å­¦ç”Ÿé¡µé¢"),this.$router.go(-1)):await this.$router.replace(`/login?redirect=${encodeURIComponent(this.$route.fullPath)}`)},async loadStudentData(){try{const t=await this.$axios.get(`/api/students/${this.userInfo.id}/`);this.studentData=t.data}catch(t){this.error=t.response?.data?.detail||"æ•°æ®åŠ è½½å¤±è´¥"}finally{this.loading=!1}}}},n=i,o=a(1656),l=(0,o.A)(n,e,r,!1,null,"88af5036",null),c=l.exports}}]);
//# sourceMappingURL=13.97366978.chunk.js.map