{"version":3,"file":"js/538.9774c34d.chunk.js","mappings":"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","sources":["webpack://frontend/./src/views/Login/index.vue","webpack://frontend/src/views/Login/index.vue","webpack://frontend/./src/views/Login/index.vue?02b9","webpack://frontend/./src/views/Login/index.vue?8e58","webpack://frontend/./node_modules/core-js/modules/es.iterator.for-each.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-container\"},[_c('el-card',{staticClass:\"login-card\"},[_c('div',{staticClass:\"brand-section\"},[_c('div',{staticClass:\"logo\"}),_c('h1',{staticClass:\"title\"},[_vm._v(\"校园失物招领系统\")]),_c('p',{staticClass:\"subtitle\"},[_vm._v(\"LOST & FOUND MANAGEMENT SYSTEM\")])]),_c('el-tabs',{staticClass:\"auth-tabs\",model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"登录\",\"name\":\"login\"}},[_c('transition',{attrs:{\"name\":\"fade-slide\",\"mode\":\"out-in\"}},[_c('el-form',{ref:\"loginForm\",staticClass:\"auth-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.loginRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"学号/工号\",\"prefix-icon\":\"el-icon-user\",\"size\":\"medium\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"密码\",\"show-password\":\"\",\"prefix-icon\":\"el-icon-lock\",\"size\":\"medium\"},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}})],1),_c('el-button',{staticClass:\"submit-btn\",attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.handleLogin}},[_vm._v(\" 立即登录 \")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"注册\",\"name\":\"register\"}},[_c('transition',{attrs:{\"name\":\"fade-slide\",\"mode\":\"out-in\"}},[_c('el-form',{ref:\"registerForm\",staticClass:\"auth-form\",attrs:{\"model\":_vm.registerForm,\"rules\":_vm.registerRules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"placeholder\":\"学号/工号\",\"prefix-icon\":\"el-icon-user\",\"size\":\"medium\"},model:{value:(_vm.registerForm.username),callback:function ($$v) {_vm.$set(_vm.registerForm, \"username\", $$v)},expression:\"registerForm.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"真实姓名\",\"prefix-icon\":\"el-icon-s-custom\",\"size\":\"medium\"},model:{value:(_vm.registerForm.real_name),callback:function ($$v) {_vm.$set(_vm.registerForm, \"real_name\", $$v)},expression:\"registerForm.real_name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"密码\",\"show-password\":\"\",\"prefix-icon\":\"el-icon-lock\",\"size\":\"medium\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"placeholder\":\"确认密码\",\"show-password\":\"\",\"prefix-icon\":\"el-icon-key\",\"size\":\"medium\"},model:{value:(_vm.registerForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirmPassword\", $$v)},expression:\"registerForm.confirmPassword\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"role\"}},[_c('el-select',{staticClass:\"full-width\",attrs:{\"placeholder\":\"请选择身份\",\"size\":\"medium\"},model:{value:(_vm.registerForm.role),callback:function ($$v) {_vm.$set(_vm.registerForm, \"role\", $$v)},expression:\"registerForm.role\"}},[_c('el-option',{staticClass:\"role-option\",attrs:{\"label\":\"学生\",\"value\":\"student\"}}),_c('el-option',{staticClass:\"role-option\",attrs:{\"label\":\"教职工\",\"value\":\"staff\"}})],1)],1),_c('el-button',{staticClass:\"submit-btn\",attrs:{\"type\":\"primary\",\"size\":\"medium\"},on:{\"click\":_vm.handleRegister}},[_vm._v(\" 立即注册 \")])],1)],1)],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login-container\">\r\n    <el-card class=\"login-card\">\r\n      <div class=\"brand-section\">\r\n        <div class=\"logo\"></div>\r\n        <h1 class=\"title\">校园失物招领系统</h1>\r\n        <p class=\"subtitle\">LOST & FOUND MANAGEMENT SYSTEM</p>\r\n      </div>\r\n      <el-tabs\r\n          v-model=\"activeTab\"\r\n          class=\"auth-tabs\">\r\n        <!--        @tab-click=\"handleTabClick\"-->\r\n\r\n        <!-- 登录 Tab -->\r\n        <el-tab-pane label=\"登录\" name=\"login\">\r\n          <transition name=\"fade-slide\" mode=\"out-in\">\r\n            <el-form\r\n                ref=\"loginForm\"\r\n                :model=\"loginForm\"\r\n                :rules=\"loginRules\"\r\n                class=\"auth-form\"\r\n                label-position=\"top\"\r\n            >\r\n              <el-form-item prop=\"username\">\r\n                <el-input\r\n                    v-model=\"loginForm.username\"\r\n                    placeholder=\"学号/工号\"\r\n                    prefix-icon=\"el-icon-user\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <el-form-item prop=\"password\">\r\n                <el-input\r\n                    v-model=\"loginForm.password\"\r\n                    type=\"password\"\r\n                    placeholder=\"密码\"\r\n                    show-password\r\n                    prefix-icon=\"el-icon-lock\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <el-button\r\n                  type=\"primary\"\r\n                  class=\"submit-btn\"\r\n                  size=\"medium\"\r\n                  @click=\"handleLogin\"\r\n              >\r\n                立即登录\r\n              </el-button>\r\n            </el-form>\r\n          </transition>\r\n        </el-tab-pane>\r\n        <!-- 注册 Tab -->\r\n        <el-tab-pane label=\"注册\" name=\"register\">\r\n          <transition name=\"fade-slide\" mode=\"out-in\">\r\n            <el-form\r\n                ref=\"registerForm\"\r\n                :model=\"registerForm\"\r\n                :rules=\"registerRules\"\r\n                class=\"auth-form\"\r\n                label-position=\"top\"\r\n            >\r\n              <!-- 账号输入 -->\r\n              <el-form-item prop=\"username\">\r\n                <el-input\r\n                    v-model=\"registerForm.username\"\r\n                    placeholder=\"学号/工号\"\r\n                    prefix-icon=\"el-icon-user\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <!-- 真实姓名 -->\r\n              <el-form-item prop=\"name\">\r\n                <el-input\r\n                    v-model=\"registerForm.real_name\"\r\n                    placeholder=\"真实姓名\"\r\n                    prefix-icon=\"el-icon-s-custom\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <!-- 密码 -->\r\n              <el-form-item prop=\"password\">\r\n                <el-input\r\n                    v-model=\"registerForm.password\"\r\n                    type=\"password\"\r\n                    placeholder=\"密码\"\r\n                    show-password\r\n                    prefix-icon=\"el-icon-lock\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <!-- 确认密码 -->\r\n              <el-form-item prop=\"confirmPassword\">\r\n                <el-input\r\n                    v-model=\"registerForm.confirmPassword\"\r\n                    type=\"password\"\r\n                    placeholder=\"确认密码\"\r\n                    show-password\r\n                    prefix-icon=\"el-icon-key\"\r\n                    size=\"medium\"\r\n                />\r\n              </el-form-item>\r\n              <!-- 身份选择 -->\r\n              <el-form-item prop=\"role\">\r\n                <el-select\r\n                    v-model=\"registerForm.role\"\r\n                    placeholder=\"请选择身份\"\r\n                    class=\"full-width\"\r\n                    size=\"medium\"\r\n                >\r\n                  <el-option\r\n                      label=\"学生\"\r\n                      value=\"student\"\r\n                      class=\"role-option\"\r\n                  />\r\n                  <el-option\r\n                      label=\"教职工\"\r\n                      value=\"staff\"\r\n                      class=\"role-option\"\r\n                  />\r\n                </el-select>\r\n              </el-form-item>\r\n              <el-button\r\n                  type=\"primary\"\r\n                  class=\"submit-btn\"\r\n                  size=\"medium\"\r\n                  @click=\"handleRegister\"\r\n              >\r\n                立即注册\r\n              </el-button>\r\n            </el-form>\r\n          </transition>\r\n        </el-tab-pane>\r\n      </el-tabs>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nexport default {\r\n  name: 'AuthPage',\r\n  data() {\r\n    const validateConfirmPassword = (rule, value, callback) => {\r\n      if (value !== this.registerForm.password) {\r\n        callback(new Error('两次输入的密码不一致'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    return {\r\n      activeTab: 'login',\r\n      loginForm: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      registerForm: {\r\n        username: '',\r\n        real_name: '',\r\n        password: '',\r\n        confirm_Password: '',\r\n        role: '',\r\n        csrfToken: '',\r\n      },\r\n      loginRules: {\r\n        username: [{required: true, message: '请输入学号/工号', trigger: 'blur'}],\r\n        password: [{required: true, message: '请输入密码', trigger: 'blur'}]\r\n      },\r\n      registerRules: {\r\n        username: [{required: true, message: '请输入学号/工号', trigger: 'blur'}],\r\n        real_name: [{required: true, message: '请输入姓名', trigger: 'blur'}],\r\n        password: [\r\n          {required: true, message: '请输入密码', trigger: 'blur'},\r\n          {min: 6, message: '密码长度不能小于6位', trigger: 'blur'}\r\n        ],\r\n        confirmPassword: [\r\n          {required: true, message: '请确认密码', trigger: 'blur'},\r\n          {validator: validateConfirmPassword, trigger: 'blur'}\r\n        ],\r\n        role: [{required: true, message: '请选择身份', trigger: 'change'}]\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    async handleLogin() {\r\n      try {\r\n        await this.$refs.loginForm.validate()\r\n        const response = await this.$http({\r\n          url: '/login/',\r\n          method: 'post',\r\n          data: {\r\n            username: this.loginForm.username,\r\n            password: this.loginForm.password\r\n          }\r\n        })\r\n\r\n        // 存储token和用户信息\r\n        await this.$store.dispatch('login', {\r\n          token: response.token,\r\n          user: {\r\n            id: response.user_id,\r\n            username: response.username,\r\n            role: response.role,\r\n            real_name: response.real_name\r\n          }\r\n        })\r\n\r\n        this.$message.success('登录成功')\r\n\r\n        // 根据角色直接跳转到对应页面\r\n        const roleRouteMap = {\r\n          student: '/user-dashboard',\r\n          staff: '/user-dashboard',\r\n          admin: '/admin-dashboard'\r\n        }\r\n\r\n        // 获取重定向地址或使用默认路由\r\n        const redirect = this.$route.query.redirect || roleRouteMap[response.role] || '/'\r\n\r\n        // 使用 replace 而不是 push 来避免在历史记录中留下多余的记录\r\n        this.$router.replace(redirect).catch(err => {\r\n          if (err.name !== 'NavigationDuplicated') {\r\n            console.error('Navigation error:', err)\r\n            this.$router.replace(roleRouteMap[response.role] || '/')\r\n          }\r\n        })\r\n      } catch (error) {\r\n        console.error('Login error:', error)\r\n        const errorMsg = error.response?.data?.error || error.response?.data?.message || '登录失败，请检查用户名和密码'\r\n        this.$message.error(errorMsg)\r\n      }\r\n    },\r\n\r\n    handleRegister: async function () {\r\n      try {\r\n        // 验证表单\r\n        await this.$refs.registerForm.validate()\r\n\r\n        // 先获取CSRF令牌\r\n        const csrfToken = await this.$http.get('/csrf-token/')\r\n        // 打印发送的数据，用于调试\r\n        const data = {\r\n          username: this.registerForm.username,\r\n          password: this.registerForm.password,\r\n          confirm_password: this.registerForm.confirmPassword,\r\n          real_name: this.registerForm.real_name,\r\n          role: this.registerForm.role,\r\n          // csrfToken: this.registerForm.csrfToken\r\n          csrfToken: csrfToken,\r\n        };\r\n        console.log('Sending registration data:', data);\r\n        // 发送注册请求\r\n        const response = await this.$http({\r\n          url: '/register/',\r\n          method: 'post',\r\n          data: data\r\n        })\r\n        // 显示注册成功的消息\r\n        this.$message.success(response.message || '注册成功')\r\n        await this.$nextTick();\r\n        // 注册成功后自动登录\r\n        await this.$store.dispatch('login', {\r\n          token: response.token,\r\n          user: {\r\n            id: response.user_id,\r\n            username: response.username,\r\n            role: response.role,\r\n            real_name: response.real_name\r\n          }\r\n        })\r\n        // 等待 Vuex 状态更新完成\r\n        await this.$nextTick()\r\n        // 根据角色跳转到对应的仪表板\r\n        const roleRouteMap = {\r\n          student: '/user-dashboard',\r\n          staff: '/user-dashboard',\r\n          admin: '/admin-dashboard'\r\n        }\r\n        // 跳转到对应的仪表板\r\n        await this.$router.replace(roleRouteMap[response.role] || '/')\r\n            .catch(err => {\r\n              if (err.name !== 'NavigationDuplicated') {\r\n                console.error('Navigation error:', err)\r\n              }\r\n            })\r\n        this.$message.success(response.message || '登录成功')\r\n      } catch (error) {\r\n        console.error('Register error:', error)\r\n        if (error.response && error.response.data) {\r\n          const errorData = error.response.data.error\r\n          if (typeof errorData === 'object') {\r\n            // 处理字段级别的错误\r\n            Object.keys(errorData).forEach(field => {\r\n              this.$message.error(`${field}: ${errorData[field]}`)\r\n            })\r\n          } else {\r\n            // 处理一般错误消息\r\n            this.$message.error(errorData || '注册失败，请重试')\r\n          }\r\n        } else {\r\n          this.$message.error('注册失败，请重试')\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.login-container {\r\n  height: 100vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\r\n  padding: 24px;\r\n}\r\n\r\n.login-card {\r\n  width: 100%;\r\n  max-width: 440px;\r\n  min-width: 320px;\r\n  border-radius: 16px;\r\n  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.1);\r\n  overflow: visible;\r\n  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n  &:hover {\r\n    transform: translateY(-3px);\r\n  }\r\n}\r\n\r\n.brand-section {\r\n  text-align: center;\r\n  padding: 24px 0 16px;\r\n\r\n  .logo {\r\n    width: 72px;\r\n    height: 72px;\r\n    margin: 0 auto 18px;\r\n    background: #409EFF;\r\n    border-radius: 18px;\r\n    position: relative;\r\n    box-shadow: 0 4px 12px rgba(64, 158, 255, 0.2);\r\n\r\n    &::after {\r\n      content: 'LF';\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      color: white;\r\n      font-weight: 800;\r\n      font-size: 26px;\r\n      letter-spacing: 1px;\r\n    }\r\n  }\r\n\r\n  .title {\r\n    font-size: 26px;\r\n    color: #2c3e50;\r\n    margin-bottom: 6px;\r\n    letter-spacing: 0.5px;\r\n    font-family: 'Helvetica Neue', Helvetica, 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;\r\n  }\r\n\r\n  .subtitle {\r\n    color: #7f8c8d;\r\n    font-size: 13px;\r\n    letter-spacing: 1.2px;\r\n    font-weight: 500;\r\n  }\r\n}\r\n\r\n.auth-tabs {\r\n  padding: 0 32px;\r\n\r\n  ::v-deep .el-tabs__header {\r\n    margin: 0 0 20px 0;\r\n  }\r\n\r\n  ::v-deep .el-tabs__nav-wrap {\r\n    display: flex;\r\n    justify-content: center;\r\n\r\n    &::after {\r\n      height: 1px;\r\n      background-color: #ecf0f1;\r\n    }\r\n  }\r\n\r\n  ::v-deep .el-tabs__active-bar {\r\n    height: 2.8px;\r\n    border-radius: 1.5px;\r\n    background-color: #409EFF;\r\n  }\r\n\r\n  ::v-deep .el-tabs__nav {\r\n    width: 100%;\r\n    justify-content: space-around;\r\n  }\r\n\r\n  ::v-deep .el-tabs__item {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-size: 15px;\r\n    padding: 0 24px;\r\n    height: 46px;\r\n    transition: all 0.25s ease;\r\n\r\n    &:hover {\r\n      color: #66b1ff;\r\n      transform: translateY(-1px);\r\n    }\r\n\r\n    &.is-active {\r\n      color: #409EFF;\r\n      font-weight: 600;\r\n    }\r\n  }\r\n}\r\n\r\n.auth-form {\r\n  .el-form-item {\r\n    margin-bottom: 22px;\r\n\r\n    &::v-deep .el-form-item__content {\r\n      line-height: 1;\r\n    }\r\n  }\r\n\r\n  .el-input {\r\n    &::v-deep .el-input__inner {\r\n      height: 44px;\r\n      line-height: 44px;\r\n      padding-left: 42px;\r\n      border-radius: 8px;\r\n      transition: border-color 0.2s ease;\r\n\r\n      &:focus {\r\n        border-color: #409EFF;\r\n        box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);\r\n      }\r\n    }\r\n\r\n    &::v-deep .el-input__prefix {\r\n      left: 12px;\r\n      display: flex;\r\n      align-items: center;\r\n      color: #a0abb6;\r\n    }\r\n  }\r\n\r\n  .el-select {\r\n    width: 100%;\r\n\r\n    &::v-deep .el-input__inner {\r\n      height: 44px;\r\n      line-height: 44px;\r\n      padding-left: 15px;\r\n    }\r\n  }\r\n\r\n  .submit-btn {\r\n    width: 100%;\r\n    height: 44px;\r\n    font-size: 15px;\r\n    font-weight: 500;\r\n    letter-spacing: 0.8px;\r\n    margin-top: 16px;\r\n    border-radius: 8px;\r\n    background-color: #409EFF;\r\n    border-color: #409EFF;\r\n    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);\r\n\r\n    &:hover {\r\n      transform: translateY(-1px);\r\n      box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);\r\n    }\r\n\r\n    &:active {\r\n      transform: translateY(0);\r\n      box-shadow: 0 2px 6px rgba(64, 158, 255, 0.2);\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .login-container {\r\n    padding: 12px;\r\n    background: linear-gradient(135deg, #f5f7fa 0%, #dde5f0 100%);\r\n  }\r\n  .login-card {\r\n    border-radius: 14px;\r\n    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);\r\n  }\r\n  .auth-tabs {\r\n    padding: 0 20px;\r\n\r\n    ::v-deep .el-tabs__item {\r\n      font-size: 14px;\r\n      padding: 0 18px;\r\n      height: 44px;\r\n    }\r\n  }\r\n  .brand-section {\r\n    .logo {\r\n      width: 64px;\r\n      height: 64px;\r\n    }\r\n\r\n    .title {\r\n      font-size: 23px;\r\n    }\r\n\r\n    .subtitle {\r\n      font-size: 12px;\r\n    }\r\n  }\r\n  .auth-form {\r\n    .submit-btn {\r\n      height: 42px;\r\n      font-size: 14px;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=10f6ca8f&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=10f6ca8f&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10f6ca8f\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar aCallable = require('../internals/a-callable');\nvar anObject = require('../internals/an-object');\nvar getIteratorDirect = require('../internals/get-iterator-direct');\n\n// `Iterator.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-iterator.prototype.foreach\n$({ target: 'Iterator', proto: true, real: true }, {\n  forEach: function forEach(fn) {\n    anObject(this);\n    aCallable(fn);\n    var record = getIteratorDirect(this);\n    var counter = 0;\n    iterate(record, function (value) {\n      fn(value, counter++);\n    }, { IS_RECORD: true });\n  }\n});\n"],"names":["render","_vm","this","_c","_self","staticClass","_v","model","value","activeTab","callback","$$v","expression","attrs","ref","loginForm","loginRules","username","$set","password","on","handleLogin","registerForm","registerRules","real_name","confirmPassword","role","handleRegister","staticRenderFns","name","data","validateConfirmPassword","rule","Error","confirm_Password","csrfToken","required","message","trigger","min","validator","methods","$refs","validate","response","$http","url","method","$store","dispatch","token","user","id","user_id","$message","success","roleRouteMap","student","staff","admin","redirect","$route","query","$router","replace","catch","err","console","error","errorMsg","get","confirm_password","log","$nextTick","errorData","Object","keys","forEach","field","component","$","iterate","aCallable","anObject","getIteratorDirect","target","proto","real","fn","record","counter","IS_RECORD"],"sourceRoot":""}